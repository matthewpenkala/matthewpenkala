!function(w,_,b){function k(t,e){return e=w(t).css(e),(e=/^-?\d+/.exec(e))?+e[0]:0}function i(t,e,r){return t*=e=l/e,Math.round(t*Math.cos(e*r))}function C(t){var e=w(this).data("enscroll"),r=this,l=e.settings;e&&l.showOnHover&&(e._fadeTimer?clearTimeout(e._fadeTimer):(l.verticalScrolling&&w(e.verticalTrackWrapper).is(":visible")&&w(e.verticalTrackWrapper).stop().fadeTo(275,1),l.horizontalScrolling&&w(e.horizontalTrackWrapper).is(":visible")&&w(e.horizontalTrackWrapper).stop().fadeTo(275,1)),!1!==t&&(e._fadeTimer=setTimeout(function(){var t=w(r).data("enscroll"),e=t.settings;t&&e.showOnHover&&(e.verticalScrolling&&w(t.verticalTrackWrapper).is(":visible")&&w(t.verticalTrackWrapper).stop().fadeTo(275,0),e.horizontalScrolling&&w(t.horizontalTrackWrapper).is(":visible")&&w(t.horizontalTrackWrapper).stop().fadeTo(275,0),t._fadeTimer=null)},1750)))}function z(t,e){var r=w(t),l=r.data("enscroll"),n=r.scrollTop();l&&l.settings.verticalScrolling&&(r.scrollTop(n+e),l.settings.showOnHover&&C.call(t))}function H(t,e){var r=w(t),l=r.data("enscroll"),n=r.scrollLeft();l&&l.settings.horizontalScrolling&&(r.scrollLeft(n+e),l.settings.showOnHover&&C.call(t))}function W(t){if(1===t.which){function e(){return s=!1,b.body.style.cursor=l,this.style.cursor="",c.removeClass("dragging"),w(b.body).off("mousemove.enscroll.vertical").off("mouseup.enscroll.vertical"),w(b).off("mouseout.enscroll.vertical"),o.on("scroll.enscroll.pane",function(t){L.call(this,t)}),!1}var r,l,n=t.data.pane,o=w(n),i=o.data("enscroll"),s=!0,a=function(){s&&(d!==r&&(i._scrollingY||(i._scrollingY=!0,i._startY=o.scrollTop(),v(function(){m(o)})),h.style.top=d+"px",i._endY=d*u/g,r=d),v(a),i.settings.showOnHover&&C.call(n))},c=w(i.verticalTrackWrapper).find(".enscroll-track"),h=c.children().first()[0],d=parseInt(h.style.top,10),u=n.scrollHeight-(i._scrollHeightNoPadding?w(n).height():w(n).innerHeight()),p=t.clientY-w(h).offset().top,g=c.height()-w(h).outerHeight(),f=c.offset().top;return o.off("scroll.enscroll.pane"),w(b.body).on({"mousemove.enscroll.vertical":function(t){return s&&(d=t.clientY-f-p,d=Math.min(d<0?0:d,g)),!1},"mouseup.enscroll.vertical":function(t){e.call(h,t)}}),w(b).on("mouseout.enscroll.vertical",function(t){t.target.nodeName&&"HTML"===t.target.nodeName.toUpperCase()&&e.call(h,t)}),c.hasClass("dragging")||(c.addClass("dragging"),l=w(b.body).css("cursor"),this.style.cursor=b.body.style.cursor="ns-resize"),v(a),!1}}function x(t){if(1===t.which){function e(){return s=!1,c.removeClass("dragging"),b.body.style.cursor=l,this.style.cursor="",c.removeClass("dragging"),w(b.body).off("mousemove.enscroll.horizontal").off("mouseup.enscroll.horizontal"),w(b).off("mouseout.enscroll.horizontal"),o.on("scroll.enscroll.pane",function(t){L.call(this,t)}),!1}var r,l,n=t.data.pane,o=w(n),i=w(n).data("enscroll"),s=!0,a=function(){s&&(d!==r&&(i._scrollingX||(i._scrollingX=!0,i._startX=o.scrollLeft(),v(function(){m(o)})),h.style.left=d+"px",i._endX=d*u/g,r=d),v(a),i.settings.showOnHover&&C.call(n))},c=w(i.horizontalTrackWrapper).find(".enscroll-track"),h=c.children().first()[0],d=parseInt(h.style.left,10),u=n.scrollWidth-w(n).innerWidth(),p=t.clientX-w(h).offset().left,g=c.width()-w(h).outerWidth(),f=c.offset().left;return o.off("scroll.enscroll.pane"),w(b.body).on({"mousemove.enscroll.horizontal":function(t){return s&&(d=t.clientX-f-p,d=Math.min(d<0?0:d,g)),!1},"mouseup.enscroll.horizontal":function(t){e.call(h,t)}}),w(b).on("mouseout.enscroll.horizontal",function(t){t.target.nodeName&&"HTML"===t.target.nodeName.toUpperCase()&&e.call(h,t)}),c.hasClass("dragging")||(c.addClass("dragging"),l=w("body").css("cursor"),this.style.cursor=b.body.style.cursor="ew-resize"),v(a),!1}}function S(t,e){var r=t.data("enscroll"),l=t.scrollLeft(),n=t[0].scrollWidth-t.innerWidth();return r.settings.horizontalScrolling&&!r._scrollingY&&(r._scrollingX||(r._scrollingX=!0,r._startX=l,r._endX=r._startX,v(function(){m(t)})),r._endX=0<e?Math.min(l+e,n):Math.max(0,l+e),e<0&&0<l||0<e&&l<n)}function X(t,e){var r=t.data("enscroll"),l=t.scrollTop(),n=t[0].scrollHeight-(r._scrollHeightNoPadding?t.height():t.innerHeight());return r.settings.verticalScrolling&&!r._scrollingX&&(r._scrollingY||(r._scrollingY=!0,r._startY=l,r._endY=r._startY,v(function(){m(t)})),r._endY=0<e?Math.min(l+e,n):Math.max(0,l+e),e<0&&0<l||0<e&&l<n)}function Y(t){var e=w(this),r=e.data("enscroll");if(!/(input)|(select)|(textarea)/i.test(this.nodeName)&&t.target===this&&r){switch(r=r.settings.scrollIncrement,t.keyCode){case 32:case 34:return X(e,e.height()),!1;case 33:return X(e,-e.height()),!1;case 35:return X(e,this.scrollHeight),!1;case 36:return X(e,-this.scrollHeight),!1;case 37:return S(e,-r),!1;case 38:return X(e,-r),!1;case 39:return S(e,r),!1;case 40:return X(e,r),!1}return!0}}function E(){var t=this,e=w(t).data("enscroll").settings,r=!0,l=0,n=0,o=w(t).offset().top,i=o+w(t).outerHeight(),s=w(t).offset().left,a=s+w(t).outerWidth(),c=function(){e.horizontalScrolling&&l&&H(t,parseInt(l/4,10)),e.verticalScrolling&&n&&z(t,parseInt(n/4,10)),r&&v(c)};v(c),w(b).on({"mousemove.enscroll.pane":function(t){var e=t.pageX;t=t.pageY,l=e<s?e-s:a<e?e-a:0,n=t<o?t-o:i<t?t-i:0},"mouseup.enscroll.pane":function(){r=!1,w(b).off("mousemove.enscroll.pane").off("mouseup.enscroll.pane")}})}function M(t){function e(t){r=t.touches[0].clientX,l=t.touches[0].clientY,n=n||(l===i&&r===o?void 0:Math.abs(i-l)>Math.abs(o-r)?"y":"x"),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}var r,l,n,o,i,s,a,c=this,h=function(){s&&("y"===n?(z(c,i-l),a=i-l,i=l):"x"===n&&(H(c,o-r),a=o-r,o=r),v(h))},d=function(){var r=0,l=Math.abs(1.5*a);this.removeEventListener("touchmove",e,!1),this.removeEventListener("touchend",d,!1),s=!1,v(function t(){var e;r===l||s||(e=l,e=Math.round(a*u*Math.pow(2,-10*r/e+1)/e),isNaN(e)||0===e||(r+=1,("y"===n?z:H)(c,e),v(t)))})};1===t.touches.length&&(o=t.touches[0].clientX,i=t.touches[0].clientY,s=!0,this.addEventListener("touchmove",e,!1),this.addEventListener("touchend",d,!1),v(h))}function L(){var t,e,r,l=w(this),n=l.data("enscroll");n&&(n.settings.verticalScrolling&&(t=(e=w(n.verticalTrackWrapper).find(".enscroll-track")[0]).firstChild,r=l.scrollTop()/(this.scrollHeight-(n._scrollHeightNoPadding?l.height():l.innerHeight())),r=isNaN(r)?0:r,t.style.top=r*(w(e).height()-w(t).outerHeight())+"px"),n.settings.horizontalScrolling&&(t=(e=w(n.horizontalTrackWrapper).find(".enscroll-track")[0]).firstChild,r=l.scrollLeft()/(this.scrollWidth-l.innerWidth()),r=isNaN(r)?0:r,t.style.left=r*(w(e).width()-w(t).innerWidth())+"px"))}var e={verticalScrolling:!0,horizontalScrolling:!1,verticalScrollerSide:"right",showOnHover:!1,scrollIncrement:20,minScrollbarLength:40,pollChanges:!0,drawCorner:!0,drawScrollButtons:!1,clickTrackToScroll:!0,easingDuration:500,propagateWheelEvent:!0,verticalTrackClass:"vertical-track",horizontalTrackClass:"horizontal-track",horizontalHandleClass:"horizontal-handle",verticalHandleClass:"vertical-handle",scrollUpButtonClass:"scroll-up-btn",scrollDownButtonClass:"scroll-down-btn",scrollLeftButtonClass:"scroll-left-btn",scrollRightButtonClass:"scroll-right-btn",cornerClass:"scrollbar-corner",zIndex:1,addPaddingToPane:!0,horizontalHandleHTML:'<div class="left"></div><div class="right"></div>',verticalHandleHTML:'<div class="top"></div><div class="bottom"></div>'},v=_.requestAnimationFrame||_.mozRequestAnimationFrame||_.webkitRequestAnimationFrame||_.oRequestAnimationFrame||_.msRequestAnimationFrame||function(t){setTimeout(t,17)},l=.5*Math.PI,u=10*Math.log(2),m=function(t){var e,r,l,n=t.data("enscroll"),o=n._duration;!0===n._scrollingX&&(0==(e=n._endX-n._startX)?n._scrollingX=!1:(r=t.scrollLeft(),l=2*o/Math.PI*Math.asin((r-n._startX)/e),0<e?r>=n._endX||r<n._startX?n._scrollingX=!1:(H(t,Math.max(1,i(e,o,l))),v(function(){m(t)})):r<=n._endX||r>n._startX?n._scrollingX=!1:(H(t,Math.min(-1,i(e,o,l))),v(function(){m(t)})))),!0===n._scrollingY&&(0==(e=n._endY-n._startY)?n._scrollingY=!1:(r=t.scrollTop(),l=2*o/Math.PI*Math.asin((r-n._startY)/e),0<e?r>=n._endY||r<n._startY?n._scrollingY=!1:(z(t,Math.max(1,i(e,o,l))),v(function(){m(t)})):r<=n._endY||r>n._startY?n._scrollingY=!1:(z(t,Math.min(-1,i(e,o,l))),v(function(){m(t)}))))},I={reposition:function(){return this.each(function(){function t(t,e,r){t.style.left=e+"px",t.style.top=r+"px"}var e,r,l,n=w(this),o=n.data("enscroll");o&&(l=n.position(),e=o.corner,o.settings.verticalScrolling&&t(r=o.verticalTrackWrapper,"right"===o.settings.verticalScrollerSide?l.left+n.outerWidth()-w(r).width()-k(this,"border-right-width"):l.left+k(this,"border-left-width"),l.top+k(this,"border-top-width")),o.settings.horizontalScrolling&&t(r=o.horizontalTrackWrapper,l.left+k(this,"border-left-width"),l.top+n.outerHeight()-w(r).height()-k(this,"border-bottom-width")),e&&t(e,l.left+n.outerWidth()-w(e).outerWidth()-k(this,"border-right-width"),l.top+n.outerHeight()-w(e).outerHeight()-k(this,"border-bottom-width")))})},resize:function(){return this.each(function(){var t,e,r,l,n,o,i,s,a=w(this),c=a.data("enscroll");return!c||(t=c.settings,void(a.is(":visible")?(t.verticalScrolling&&(s=c.verticalTrackWrapper,e=(o=a.innerHeight())/this.scrollHeight,r=w(s).find(".enscroll-track")[0],i=w(s).find("."+t.scrollUpButtonClass),l=w(s).find("."+t.scrollDownButtonClass),n=t.horizontalScrolling?o-w(c.horizontalTrackWrapper).find(".enscroll-track").outerHeight():o,n-=w(r).outerHeight()-w(r).height()+i.outerHeight()+l.outerHeight(),o=r.firstChild,i=Math.max(e*n,t.minScrollbarLength),i-=w(o).outerHeight()-w(o).height(),s.style.display="none",r.style.height=n+"px",o.style.height=i+"px",e<1&&(e=a.scrollTop()/(this.scrollHeight-a.height()),o.style.top=e*(n-i)+"px",s.style.display="block")),t.horizontalScrolling&&(s=c.horizontalTrackWrapper,e=(l=a.innerWidth())/this.scrollWidth,r=w(s).find(".enscroll-track")[0],n=w(s).find("."+t.scrollLeftButtonClass),i=w(s).find("."+t.scrollRightButtonClass),l=t.verticalScrolling?l-w(c.verticalTrackWrapper).find(".enscroll-track").outerWidth():l,l-=w(r).outerWidth()-w(r).width()+n.outerWidth()+i.outerWidth(),o=r.firstChild,i=Math.max(e*l,t.minScrollbarLength),i-=w(o).outerWidth()-w(o).width(),s.style.display="none",r.style.width=l+"px",o.style.width=i+"px",e<1&&(e=a.scrollLeft()/(this.scrollWidth-a.width()),o.style.left=e*(l-i)+"px",s.style.display="block"),c._prybar&&(s=c._prybar,this.removeChild(s),t.verticalScrolling&&(s.style.width=this.scrollWidth+w(c.verticalTrackWrapper).find(".enscroll-track").outerWidth()+"px",this.appendChild(s)))),c.corner&&(c.corner.style.display=c.verticalTrackWrapper&&c.horizontalTrackWrapper&&w(c.verticalTrackWrapper).is(":visible")&&w(c.horizontalTrackWrapper).is(":visible")?"":"none")):(t.verticalScrolling&&(c.verticalTrackWrapper.style.display="none"),t.horizontalScrolling&&(c.horizontalTrackWrapper.style.display="none"),c.corner&&(c.corner.style.display="none"))))})},startPolling:function(){return this.each(function(){var o,i=w(this).data("enscroll"),s=this,a=w(s),c=-1,h=-1,d=-1,u=-1,p=function(){var t,e,r,l,n;i.settings.pollChanges&&(t=s.scrollWidth,e=s.scrollHeight,r=a.width(),l=a.height(),n=a.offset(),(i.settings.verticalScrolling&&(l!==h||e!==u)||i.settings.horizontalScrolling&&(r!==c||t!==d))&&(d=t,u=e,I.resize.call(a)),o.left===n.left&&o.top===n.top&&r===c&&l===h||(o=n,c=r,h=l,I.reposition.call(a)),setTimeout(p,350))};i&&(i.settings.pollChanges=!0,u=s.scrollHeight,d=s.scrollWidth,o=a.offset(),p())})},stopPolling:function(){return this.each(function(){var t=w(this).data("enscroll");t&&(t.settings.pollChanges=!1)})},destroy:function(){return this.each(function(){var t,e,r=w(this),l=r.data("enscroll");l&&(I.stopPolling.call(r),e=l._mouseScrollHandler,l.settings.verticalScrolling&&(t=l.verticalTrackWrapper,w(t).remove()),l.settings.horizontalScrolling&&(t=l.horizontalTrackWrapper,w(t).remove()),l._fadeTimer&&clearTimeout(l._fadeTimer),l.corner&&w(l.corner).remove(),l._prybar&&l._prybar.parentNode&&l._prybar.parentNode===this&&w(l._prybar).remove(),this.setAttribute("style",l._style||""),l._hadTabIndex||r.removeAttr("tabindex"),r.off("scroll.enscroll.pane").off("keydown.enscroll.pane").off("mouseenter.enscroll.pane").off("mousedown.enscroll.pane").data("enscroll",null),this.removeEventListener?(this.removeEventListener("wheel",e,!1),this.removeEventListener("mousewheel",e,!1),this.removeEventListener("touchstart",M,!1)):this.detachEvent&&this.detachEvent("onmousewheel",e),w(_).off("resize.enscroll.window"))})}};w.fn.enscroll=function(t){var T;return I[t]?I[t].call(this):(T=w.extend({},e,t),this.each(function(){if(T.verticalScrolling||T.horizontalScrolling){function i(t,e){"string"==typeof e?w(t).html(e):t.appendChild(e)}function t(t){var e=w(u),r=e.data("enscroll"),l=r.settings.scrollIncrement,n="deltaX"in t?-t.deltaX:"wheelDeltaX"in t?t.wheelDeltaX:0,o="deltaY"in t?-t.deltaY:"wheelDeltaY"in t?t.wheelDeltaY:"wheelDelta"in t?t.wheelDelta:0;Math.abs(n)>Math.abs(o)&&0!==n?!S(e,(0<n?-l:l)<<2)&&r.settings.propagateWheelEvent||i(t):0!==o&&(!X(e,(0<o?-l:l)<<2)&&r.settings.propagateWheelEvent||i(t))}var e,r,l,n,o,s,a,c,h,d=w(this),u=this,p=d.attr("style"),g=!0,f={position:"absolute","z-index":T.zIndex,margin:0,padding:0};if(T.verticalScrolling){var v=b.createElement("div"),m=b.createElement("div"),y=b.createElement("a");w(m).css("position","relative").addClass("enscroll-track").addClass(T.verticalTrackClass).appendTo(v),T.drawScrollButtons&&(l=b.createElement("a"),n=b.createElement("a"),w(l).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").addClass(T.scrollUpButtonClass).on("click",function(){return z(u,-T.scrollIncrement),!1}).insertBefore(m),w(n).css({display:"block","text-decoration":"none"}).attr("href","").html("&nbsp;").on("click",function(){return z(u,T.scrollIncrement),!1}).addClass(T.scrollDownButtonClass).appendTo(v)),T.clickTrackToScroll&&w(m).on("click",function(t){t.target===this&&X(d,t.pageY>w(y).offset().top?d.height():-d.height())}),w(y).css({position:"absolute","z-index":1}).attr("href","").addClass(T.verticalHandleClass).mousedown({pane:this},W).click(function(){return!1}).appendTo(m),i(y,T.verticalHandleHTML),w(v).css(f).insertAfter(this),T.showOnHover&&w(v).css("opacity",0).on("mouseover.enscroll.vertical",function(){C.call(u,!1)}).on("mouseout.enscroll.vertical",function(){C.call(u)}),n=w(m).outerWidth(),T.addPaddingToPane&&(h="right"===T.verticalScrollerSide?{"padding-right":k(this,"padding-right")+n+"px"}:{"padding-left":k(this,"padding-left")+n+"px"},d.css(w.extend({width:d.width()-n+"px"},h)));try{0!==(a=parseInt(d.css("outline-width"),10))&&!isNaN(a)||"none"!==d.css("outline-style")||d.css("outline","none")}catch(t){d.css("outline","none")}}T.horizontalScrolling&&(e=b.createElement("div"),m=b.createElement("div"),r=b.createElement("a"),w(m).css({position:"relative","z-index":1}).addClass("enscroll-track").addClass(T.horizontalTrackClass).appendTo(e),T.drawScrollButtons&&(n=b.createElement("a"),h=b.createElement("a"),w(n).css("display","block").attr("href","").on("click",function(){return H(u,-T.scrollIncrement),!1}).addClass(T.scrollLeftButtonClass).insertBefore(m),w(h).css("display","block").attr("href","").on("click",function(){return H(u,T.scrollIncrement),!1}).addClass(T.scrollRightButtonClass).appendTo(e)),T.clickTrackToScroll&&w(m).on("click",function(t){t.target===this&&S(d,t.pageX>w(r).offset().left?d.width():-d.width())}),w(r).css({position:"absolute","z-index":1}).attr("href","").addClass(T.horizontalHandleClass).click(function(){return!1}).mousedown({pane:this},x).appendTo(m),i(r,T.horizontalHandleHTML),w(e).css(f).insertAfter(this),T.showOnHover&&w(e).css("opacity",0).on("mouseover.enscroll.horizontal",function(){C.call(u,!1)}).on("mouseout.enscroll.horizontal",function(){C.call(u)}),m=w(m).outerHeight(),T.addPaddingToPane&&d.css({height:d.height()-m+"px","padding-bottom":parseInt(d.css("padding-bottom"),10)+m+"px"}),T.verticalScrolling&&(c=document.createElement("div"),w(c).css({width:"1px",height:"1px",visibility:"hidden",padding:0,margin:"-1px"}).appendTo(this))),T.verticalScrolling&&T.horizontalScrolling&&T.drawCorner&&(o=b.createElement("div"),w(o).addClass(T.cornerClass).css(f).insertAfter(this)),d.attr("tabindex")||(d.attr("tabindex",0),g=!1);try{(!(s=d.css("outline"))||s.length<1)&&d.css("outline","none")}catch(t){d.css("outline","none")}d.on({"scroll.enscroll.pane":function(t){L.call(this,t)},"keydown.enscroll.pane":Y,"mousedown.enscroll.pane":E}).css("overflow","hidden").data("enscroll",{settings:T,horizontalTrackWrapper:e,verticalTrackWrapper:v,corner:o,_prybar:c,_mouseScrollHandler:t,_hadTabIndex:g,_style:p,_scrollingX:!1,_scrollingY:!1,_startX:0,_startY:0,_endX:0,_endY:0,_duration:parseInt(T.easingDuration/16.66666,10),_scrollHeightNoPadding:function(t){var e,r={width:"5px",height:"1px",overflow:"hidden",padding:"8px 0",visibility:"hidden",whiteSpace:"pre-line",font:"10px/1 serif"},l=document.createElement(t);for(e in t=document.createTextNode("a\na"),r)l.style[e]=r[e];return l.appendChild(t),document.body.appendChild(l),t=l.scrollHeight<28,document.body.removeChild(l),t}(this.nodeName)}),w(_).on("resize.enscroll.window",function(){I.reposition.call(d)}),T.showOnHover&&d.on("mouseenter.enscroll.pane",function(){C.call(this)}),this.addEventListener?("onwheel"in this||"WheelEvent"in _&&0<=navigator.userAgent.toLowerCase().indexOf("msie")?this.addEventListener("wheel",t,!1):"onmousewheel"in this&&this.addEventListener("mousewheel",t,!1),this.addEventListener("touchstart",M,!1)):this.attachEvent&&this.attachEvent("onmousewheel",t),T.pollChanges&&I.startPolling.call(d),I.resize.call(d),I.reposition.call(d)}}))}}(jQuery,window,document);
