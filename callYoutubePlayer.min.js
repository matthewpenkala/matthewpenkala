function callPlayer(a,b,c){let d=document.getElementById(a);d&&"IFRAME"!==d.tagName.toUpperCase()&&(d=d.getElementsByTagName("iframe")[0]),callPlayer.queue||(callPlayer.queue={});const e=callPlayer.queue[a],f="complete"===document.readyState;if(f&&!d)window.console&&console.log(`callPlayer: Frame not found; id=${a}`),e&&e.poller&&clearInterval(e.poller);else if("listening"===b){if(d&&d.contentWindow){const b=`{"event":"listening","id":${JSON.stringify(""+a)}}`;d.contentWindow.postMessage(b,"*")}}else if(e&&e.ready||f&&(!d||d.contentWindow)&&"function"!=typeof b){if(d&&d.contentWindow){if("function"==typeof b)return b();d.contentWindow.postMessage(JSON.stringify({event:"command",func:b,args:c||[],id:a}),"*")}}else if(callPlayer.queue[a]=e||[],callPlayer.queue[a].push([b,c]),!e.poller){function b(c){if(!d){if(d=document.getElementById(a),!d)return;if("IFRAME"!==d.tagName.toUpperCase()&&(d=d.getElementsByTagName("iframe")[0],!d))return}if(c.source===d.contentWindow)for(clearInterval(e.poller),e.ready=!0,b(0,b);tmp=e.shift();)callPlayer(a,tmp[0],tmp[1])}e.poller=setInterval(()=>{callPlayer(a,"listening")},250),window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b)}}
