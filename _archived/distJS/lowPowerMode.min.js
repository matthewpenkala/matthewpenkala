export async function detectPowerSavingMode(){const a=/(iP(?:hone|ad|od)|Mac OS X)/.test(navigator.userAgent);if(a)return new Promise(a=>{const b=1e3/60,c=30,d=performance.now();let e=0;const f=setInterval(()=>{if(e<c)e++;else{clearInterval(f);const e=(performance.now()-d)/c;a(1.3<e/b)}},b)});else{const a=await detectFrameRate(),b=navigator.getBattery?await navigator.getBattery():void 0;return!(34<a)&&(!b||!b.charging&&.2>=b.level)}}export function detectFrameRate(){return new Promise(a=>{const b=30,c=performance.now();let d=0;const e=()=>{if(d<b)d++,requestAnimationFrame(e);else{const d=(performance.now()-c)/1e3;a(b/d)}};requestAnimationFrame(()=>{e()})})}
