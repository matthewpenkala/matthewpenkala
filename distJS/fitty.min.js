const fitty=function(){return!function(a,b){if("function"==typeof define&&define.amd)define(["module","exports"],b);else if("undefined"!=typeof exports)b(module,exports);else{var c={exports:{}};b(c,c.exports),a.fitty=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a};b.default=function(j){function k(a,b){var d=c({},B,b),e=a.map(function(a){var b=c({},d,{element:a});return v(b),h(b),{element:a,fit:m(b,i.DIRTY),unsubscribe:y(b)}});return x(),e}function n(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof a?k(g(document.querySelectorAll(a)),b):k([a],b)[0]}if(j){var g=function(a){return[].slice.call(a)},i={IDLE:0,DIRTY_CONTENT:1,DIRTY_LAYOUT:2,DIRTY:3},q=[],r=null,x="requestAnimationFrame"in j?function(){j.cancelAnimationFrame(r),r=j.requestAnimationFrame(function(){t(q.filter(function(a){return a.dirty}))})}:function(){},u=function(a){return function(){q.forEach(function(b){b.dirty=a}),x()}},t=function(b){b.filter(function(a){return!a.styleComputed}).forEach(function(a){a.styleComputed=s(a)}),b.filter(f).forEach(d);var c=b.filter(A);c.forEach(l),c.forEach(function(b){d(b),a(b)}),c.forEach(p)},a=function(a){return a.dirty=i.IDLE},l=function(a){a.availableWidth=a.element.parentNode.clientWidth,a.currentWidth=a.element.scrollWidth,a.previousFontSize=a.currentFontSize,a.currentFontSize=Math.min(Math.max(a.minSize,a.availableWidth/a.currentWidth*a.previousFontSize),a.maxSize),a.whiteSpace=a.multiLine&&a.currentFontSize===a.minSize?"normal":"nowrap"},A=function(a){return a.dirty!==i.DIRTY_LAYOUT||a.dirty===i.DIRTY_LAYOUT&&a.element.parentNode.clientWidth!==a.availableWidth},s=function(a){var b=j.getComputedStyle(a.element,null);a.currentFontSize=parseInt(b.getPropertyValue("font-size"),10),a.display=b.getPropertyValue("display"),a.whiteSpace=b.getPropertyValue("white-space")},f=function(a){var b=!1;return!a.preStyleTestCompleted&&(/inline-/.test(a.display)||(b=!0,a.display="inline-block"),"nowrap"!==a.whiteSpace&&(b=!0,a.whiteSpace="nowrap"),a.preStyleTestCompleted=!0,b)},d=function(a){a.originalStyle||(a.originalStyle=a.element.getAttribute("style")||""),a.element.style.cssText=a.originalStyle+";white-space:"+a.whiteSpace+";display:"+a.display+";font-size:"+a.currentFontSize+"px"},p=function(a){a.element.dispatchEvent(new CustomEvent("fit",{detail:{oldValue:a.previousFontSize,newValue:a.currentFontSize,scaleFactor:a.currentFontSize/a.previousFontSize}}))},m=function(a,b){return function(){a.dirty=b,x()}},v=function(a){a.newbie=!0,a.dirty=!0,q.push(a)},y=function(a){return function(){q=q.filter(function(b){return b.element!==a.element}),a.observeMutations&&a.observer.disconnect(),a.element.style.cssText=a.originalStyle}},h=function(a){a.observeMutations&&(a.observer=new MutationObserver(m(a,i.DIRTY_CONTENT)),a.observer.observe(a.element,a.observeMutations))},B={minSize:16,maxSize:512,multiLine:!0,observeMutations:"MutationObserver"in j&&{subtree:!0,childList:!0,characterData:!0}},b=null,C=function(){j.clearTimeout(b),b=j.setTimeout(u(i.DIRTY_LAYOUT),n.observeWindowDelay)},D=["resize","orientationchange"];return Object.defineProperty(n,"observeWindow",{set:function(a){var b=(a?"add":"remove")+"EventListener";D.forEach(function(a){j[b](a,C)})}}),n.observeWindow=!0,n.observeWindowDelay=100,n.fitAll=u(i.DIRTY),n}}("undefined"==typeof window?null:window),a.exports=b.default}),window.fitty}();export default fitty;
